<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SteamMate</title>
    
    <!-- Шрифты и Иконки -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Подключаем стили -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<!-- Контейнер для уведомлений -->
<div id="toast-container"></div>

<!-- HEADER -->
<header>
    <div class="logo" onclick="isLoggedIn=false; updateInterface()">Steam<span>Mate</span></div>
    
    <nav id="header-nav" class="nav-links hidden">
        <span id="link-home" class="nav-link active" onclick="switchTab('home')">Главная</span>
        <span id="link-search" class="nav-link" onclick="switchTab('search')">Поиск</span>
        <span id="link-tournaments" class="nav-link" onclick="switchTab('tournaments')">Турниры</span>
        <span id="link-profile" class="nav-link" onclick="switchTab('profile')">Профиль</span>
    </nav>

    <button id="header-auth-btn" class="steam-login-btn" onclick="toggleAuth()">
        <i class="fa-brands fa-steam"></i> Войти через Steam
    </button>
</header>

<!-- 1. PUBLIC LANDING (Страница для незарегистрированных) -->
<div id="public-landing">
    <section class="hero">
        <h1>Твой идеальный сквад<br>находится здесь.</h1>
        <p>Хватит играть с рандомами. Найди тимейта по званию и вайбу.</p>
        <div style="display: flex; justify-content: center; gap: 20px;">
            <button class="cta-btn" onclick="redirectToReg()">Найти лобби</button>
            <button class="cta-btn outline" onclick="redirectToReg()">Создать анкету</button>
        </div>
    </section>

    <div class="landing-container">
        <main>
            <h3 style="margin-bottom: 20px; color: var(--text-muted);">Активные заявки</h3>
            <!-- Пример карточки 1 -->
            <div class="lobby-card">
                <div class="player-info">
                    <img src="https://avatars.akamai.steamstatic.com/fef49e7fa7e1997310d705b2a6158ff8dc1cdfeb_full.jpg" class="avatar">
                    <div><div style="font-weight: bold;">Nagibator2000</div><span class="game-tag">CS2</span></div>
                </div>
                <button class="cta-btn outline" style="padding: 5px 15px; font-size: 0.9rem;" onclick="redirectToReg()">Invite</button>
            </div>
            <!-- Пример карточки 2 -->
            <div class="lobby-card">
                <div class="player-info">
                    <img src="https://avatars.akamai.steamstatic.com/00d3d5f30cb755c3c06346b0a79051d9e2b175a0_full.jpg" class="avatar">
                    <div><div style="font-weight: bold;">Rust_King</div><span class="game-tag" style="color: #e67e22;">Rust</span></div>
                </div>
                <button class="cta-btn outline" style="padding: 5px 15px; font-size: 0.9rem;" onclick="redirectToReg()">Invite</button>
            </div>
            <!-- Пример карточки 3 -->
            <div class="lobby-card">
                <div class="player-info">
                    <img src="https://avatars.akamai.steamstatic.com/c5d56249ee5d28a07db4ac9f2f37fc4a205663a5_full.jpg" class="avatar">
                    <div><div style="font-weight: bold;">Dota_Support</div><span class="game-tag" style="color: #e74c3c;">Dota 2</span></div>
                </div>
                <button class="cta-btn outline" style="padding: 5px 15px; font-size: 0.9rem;" onclick="redirectToReg()">Invite</button>
            </div>
        </main>
        
        <aside>
            <div class="tournament-card">
                <div class="badge-live">LIVE</div>
                <h3>Opening Cup #1</h3>
                <div style="color: var(--gold); font-weight: 800; font-size: 1.2rem; margin: 10px 0;">AK-47 | Asiimov</div>
                <!-- Картинка турнира на лендинге -->
                <img src="https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpot7HxfDhjxszJemkV092lnYmGm_PLP7LWnn8fvrQkiL_HoN2i2QXi_xI4Ym71LdPAcAZqZ1vV_wO5xL_qg5C7vZnLmyFh6SE8pSGKR_2uLJM/360fx360f" class="skin-img">
                <button class="cta-btn" style="width: 100%; background: var(--gold); color: black; margin-top: 15px;" onclick="redirectToReg()">Участвовать</button>
            </div>
        </aside>
    </div>
</div>

<!-- 2. APP DASHBOARD (Основное приложение) -->
<div id="app-dashboard">
    <div id="main-app-grid" class="app-grid full-width">
        
        <!-- Sidebar Left (Меню) -->
        <aside id="sidebar-left" class="sidebar hidden">
            <div class="panel">
                <div id="menu-search" class="menu-item active" onclick="switchTab('search')">
                    <i class="fa-solid fa-layer-group"></i> Активный поиск
                </div>
                <div id="menu-matches" class="menu-item" onclick="switchTab('matches')">
                    <i class="fa-solid fa-comments"></i> Мэтчи (0)
                </div>
                <div id="menu-likes" class="menu-item" onclick="switchTab('likes')">
                    <i class="fa-regular fa-heart"></i> Лайки (0)
                </div>
            </div>
            <div class="panel">
                <p style="font-size: 0.85rem; color: #777;">Мой статус:</p>
                <div style="font-weight: bold; color: var(--like);">● Online</div>
            </div>
        </aside>

        <!-- Main Content (Сменяемые экраны) -->
        <main class="main-content-area">
            
            <!-- VIEW 1: HOME DASHBOARD -->
            <div id="view-home" class="app-view"></div>

            <!-- VIEW 2: SEARCH (Стек карточек) -->
            <div id="view-search" class="app-view hidden">
                <div class="card-stack" id="card-container"></div>
            </div>

            <!-- VIEW 3: MATCHES (Мэтчи) -->
            <div id="view-matches" class="app-view hidden">
                <div class="empty-state">
                    <i class="fa-solid fa-ghost"></i>
                    <h3>Мэтчей пока нет</h3>
                    <p>Продолжай лайкать анкеты, и скоро здесь кто-то появится!</p>
                </div>
            </div>

            <!-- VIEW 4: LIKES (Лайки) -->
            <div id="view-likes" class="app-view hidden">
                <div class="empty-state">
                    <i class="fa-regular fa-face-sad-tear"></i>
                    <h3>Тебя еще никто не лайкнул</h3>
                    <p>Но это вопрос времени. Обнови анкету, чтобы повысить шансы.</p>
                </div>
            </div>

            <!-- VIEW 5: TOURNAMENTS -->
            <div id="view-tournaments" class="app-view hidden">
                <div style="background: rgba(231, 76, 60, 0.1); border: 1px solid #e74c3c; padding: 20px; border-radius: 12px; margin-bottom: 30px; display: flex; align-items: center; gap: 15px;">
                    <i class="fa-solid fa-circle-exclamation" style="color: #e74c3c; font-size: 1.5rem;"></i>
                    <div>
                        <h3 style="margin: 0; color: #e74c3c;">Все места заняты</h3>
                        <p style="margin: 0; color: #aaa; font-size: 0.9rem;">Возвращайся позже, чтобы успеть занять слот в следующем турнире.</p>
                    </div>
                </div>
                <h2 style="margin-bottom: 20px;">Текущие турниры</h2>
                <div class="tourney-list" id="tourney-list-container"></div>
            </div>

            <!-- VIEW 6: PROFILE EDITOR -->
            <div id="view-profile" class="app-view hidden">
                <h2 style="margin-bottom: 20px;">Редактирование анкеты</h2>
                <div class="panel">
                    <!-- Загрузка фото -->
                    <div class="photo-upload-container" onclick="triggerPhotoUpload()">
                        <img id="profile-preview" src="https://avatars.akamai.steamstatic.com/fef49e7fa7e1997310d705b2a6158ff8dc1cdfeb_full.jpg" class="profile-img-preview">
                        <div class="upload-icon"><i class="fa-solid fa-camera"></i></div>
                        <input type="file" id="photo-input" hidden onchange="previewPhoto(this)">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Никнейм</label>
                        <input type="text" class="form-input" id="input-nick" value="Player_One">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Основная игра</label>
                        <select class="form-select" id="input-game">
                            <option>CS2</option>
                            <option>Rust</option>
                            <option>Dota 2</option>
                            <option>Deadlock</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Теги (макс. 3)</label>
                        <div class="tags-container" id="tags-selector"></div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">О себе</label>
                        <textarea class="form-textarea" id="input-desc">Ищу адекватных ребят для игры по вечерам.</textarea>
                    </div>
                    
                    <button id="save-btn" class="cta-btn" style="width: 100%;" onclick="saveProfile()">Сохранить</button>
                </div>
            </div>
        </main>

        <!-- Sidebar Right (Фильтры) -->
        <aside id="sidebar-right" class="sidebar hidden">
            <div class="panel">
                <h3 style="margin-bottom: 20px;">Фильтры</h3>
                <div class="filter-opt selected" onclick="setFilter('all', this)"><div class="circle"></div> Все игры</div>
                <div class="filter-opt" onclick="setFilter('CS2', this)"><div class="circle"></div> CS2</div>
                <div class="filter-opt" onclick="setFilter('Rust', this)"><div class="circle"></div> Rust</div>
                <div class="filter-opt" onclick="setFilter('Dota 2', this)"><div class="circle"></div> Dota 2</div>
                <div class="filter-opt" onclick="setFilter('Deadlock', this)"><div class="circle"></div> Deadlock</div>
            </div>
        </aside>

    </div>
</div>

<!-- Подключаем логику (модуль) -->
<script type="module" src="js/app.js"></script>

</body>
</html>
